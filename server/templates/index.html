<!DOCTYPE html>
<html>
<head>
  <title>FPGA Game Scores</title>
  <style>
    table {
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    th, td {
      border: 1px solid black;
      padding: 5px 10px;
    }
  </style>
</head>
<body>
  <h1>Live Game Scores</h1>
  <div id="games"></div>

  <script>
    async function updateScores() {
        try {
            const res = await fetch("/scores");
            const data = await res.json();
            
            // LOG THE DATA: Press F12 in your browser to see this!
            console.log("Data received from server:", data);

            const container = document.getElementById("games");
            let html = "";

            // Object.entries handles the dictionary format safely
            const games = Object.entries(data);

            if (games.length === 0) {
                container.innerHTML = "<h2>No scores found in JSON file.</h2>";
                return;
            }

            games.forEach(([gameName, players]) => {
                html += `<h2>Game: ${gameName}</h2>`;
                html += `<table border="1">
                            <thead>
                                <tr><th>Player</th><th>Score</th></tr>
                            </thead>
                            <tbody>`;
                
                players.forEach(p => {
                    html += `<tr>
                                <td>${p.player || 'Unknown'}</td>
                                <td>${p.score ?? 0}</td>
                             </tr>`;
                });

                html += `</tbody></table>`;
            });

            container.innerHTML = html;
        } catch (error) {
            console.error("JavaScript Error:", error);
        }
    }

    updateScores();
    setInterval(updateScores, 1000);
</script>
</body>
</html>
